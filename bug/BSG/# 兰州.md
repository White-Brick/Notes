# 【兰州】【BSG】【2023-02-24】

## 一、问题描述
**【问题一】MESSAGE方法查询Catalog获取设备资源失败**  
    
    问题现象：通过MESSAGE获取资源失败，会尝试向‘Contact:’字段的端口发送SYN包
    定位思路：
        - BSG不代理下的正常流程？
        - SIP协议的MESSAGE每个字段代理下是否修改完全？SIP根据哪些信息
    // Todo补充协议流程&字段
    问题根因：现场下级设备较多，采用所谓“TCP回落”的方式通过建立TCP链接发送消息



**【问题二】调阅后1min重连**

    问题现象：视频调阅约1分钟左右后重连
    定位思路：现象类似超时，和保活有很大的关系
    问题根因：代理的RTCP目的端口修改失败，发往了‘port 1’

## 二、技能栈
**1）SIP协议**  


**2）TCP协议**  


**3）go实现tcp代理**




## 三、总结
1. 人的潜能是无限的，当想要做成一件事的愿望足够强烈，无论是压力还是动力，目标明确，完成时间明确，世界都会为你让路。
2. 严师出高徒，玉不琢不成器，走出舒适圈必然是痛苦的，被鄙视也好，被质疑不懂不可怕，只要你在这个过程中得到你想要的，一回生二回熟，熟便能生巧。

---


